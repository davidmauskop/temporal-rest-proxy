var We=Object.defineProperty;var re=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var Fe=(n,e,t)=>e in n?We(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Pe=(n,e)=>{for(var t in e||(e={}))Ne.call(e,t)&&Fe(n,t,e[t]);if(re)for(var t of re(e))Oe.call(e,t)&&Fe(n,t,e[t]);return n};var Ve=(n,e)=>{var t={};for(var s in n)Ne.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&re)for(var s of re(n))e.indexOf(s)<0&&Oe.call(n,s)&&(t[s]=n[s]);return t};import{ab as Ke,S as Z,i as x,s as ee,e as $,c as v,a as b,d as _,b as w,U,g as O,W as Qe,n as Ue,o as H,p as ze,q as S,K as ae,af as Xe,F as oe,H as ie,I as fe,J as ce,L as Ye,w as j,k as I,x as J,m as A,y as R,G as d,B,aL as Ze,O as xe,r as et,t as P,h as V,a1 as tt,aM as st,l as Te,v as nt,aF as rt,f as Le,aN as lt,aO as at,aP as ot,aQ as it}from"../../../../../../../chunks/vendor-c58cc9e7.js";import{h as ft,c as pe,r as ct,a as ut}from"../../../../../../../chunks/route-for-api-6e5b85aa.js";import{t as mt}from"../../../../../../../chunks/index-44505782.js";import{d as dt,c as le,h as je}from"../../../../../../../chunks/route-for-66ab8490.js";import{p as ue}from"../../../../../../../chunks/stores-810f7c97.js";import{C as Je}from"../../../../../../../chunks/code-block-2063241b.js";import{f as _t}from"../../../../../../../chunks/format-date-e714f323.js";import{L as gt}from"../../../../../../../chunks/link-eb740480.js";import"../../../../../../../chunks/navigation-2df0726c.js";import"../../../../../../../chunks/singletons-a6a7384f.js";import"../../../../../../../chunks/notifications-ac094b56.js";import"../../../../../../../chunks/is-network-error-ac7c8caf.js";import"../../../../../../../chunks/data-converter-config-1c047ebd.js";import"../../../../../../../chunks/atob-5f9d7101.js";const qe=(n={},e={})=>{const t=Pe({},n);for(const s of Object.keys(e)){const r=t[s];Array.isArray(r)?t[s]=t[s].concat(e[s]):typeof r=="object"&&!Array.isArray(r)?t[s]=qe(t[s],e[s]):t[s]=e[s]}return t},Ge=async(n,{onStart:e,onUpdate:t,onComplete:s,onError:r=ft,token:a,previousProps:o}={})=>{!o&&pe(e)&&e();try{const i=await n(a),{nextPageToken:l}=i,u=Ve(i,["nextPageToken"]),m=qe(o,u);return pe(t)&&t(m,u),l?Ge(n,{onStart:e,onUpdate:t,onComplete:s,token:l,previousProps:m}):(pe(s)&&s(m),m)}catch(c){r(c)}},Me=async({namespace:n,executionId:e,runId:t,onStart:s,onUpdate:r,onComplete:a},o=fetch)=>(await Ge(async c=>ct(ut("events",{namespace:n,executionId:e,runId:t}),{token:c,request:o}),{onStart:s,onUpdate:r,onComplete:a})).history.events,pt=async(n,e=fetch)=>Me(n,e).then(mt),ht=n=>{var a,o,i,c;let e,t;const s=n==null?void 0:n.find(l=>!!l.workflowExecutionStartedEventAttributes),r=n==null?void 0:n.find(l=>!!l.workflowExecutionCompletedEventAttributes);return s&&(e=JSON.stringify((o=(a=s==null?void 0:s.workflowExecutionStartedEventAttributes)==null?void 0:a.input)==null?void 0:o.payloads)),r&&(t=JSON.stringify((c=(i=r==null?void 0:r.workflowExecutionCompletedEventAttributes)==null?void 0:i.result)==null?void 0:c.payloads)),{input:e,result:t}};function $t(n){return Ke(n)}function vt(n){let e;const t=n[7].default,s=oe(t,n,n[6],null);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,a){s&&s.m(r,a),e=!0},p(r,a){s&&s.p&&(!e||a&64)&&ie(s,t,r,r[6],e?ce(t,r[6],a,null):fe(r[6]),null)},i(r){e||(S(s,r),e=!0)},o(r){H(s,r),e=!1},d(r){s&&s.d(r)}}}function bt(n){let e,t,s,r;t=new Ye({props:{icon:n[0],scale:n[2]}});const a=n[7].default,o=oe(a,n,n[6],null);return{c(){e=$("div"),j(t.$$.fragment),s=I(),o&&o.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var c=b(e);J(t.$$.fragment,c),s=A(c),o&&o.l(c),c.forEach(_),this.h()},h(){w(e,"class","flex gap-2 items-center")},m(i,c){O(i,e,c),R(t,e,null),d(e,s),o&&o.m(e,null),r=!0},p(i,c){const l={};c&1&&(l.icon=i[0]),c&4&&(l.scale=i[2]),t.$set(l),o&&o.p&&(!r||c&64)&&ie(o,a,i,i[6],r?ce(a,i[6],c,null):fe(i[6]),null)},i(i){r||(S(t.$$.fragment,i),S(o,i),r=!0)},o(i){H(t.$$.fragment,i),H(o,i),r=!1},d(i){i&&_(e),B(t),o&&o.d(i)}}}function wt(n){let e,t,s,r,a,o,i;const c=[bt,vt],l=[];function u(m,f){return m[0]?0:1}return t=u(n),s=l[t]=c[t](n),{c(){e=$("a"),s.c(),this.h()},l(m){e=v(m,"A",{class:!0,href:!0});var f=b(e);s.l(f),f.forEach(_),this.h()},h(){w(e,"class","border-2 py-2 px-4 hover:text-white hover:bg-gray-600 flex items-center justify-center svelte-1orl6nd"),w(e,"href",r=n[3]+n[5].url.search),U(e,"rounded-lg",!n[1]),U(e,"active",n[5].url.pathname.includes(n[4])),U(e,"group",n[1])},m(m,f){O(m,e,f),l[t].m(e,null),a=!0,o||(i=Qe(e,"click",n[8]),o=!0)},p(m,[f]){let E=t;t=u(m),t===E?l[t].p(m,f):(Ue(),H(l[E],1,1,()=>{l[E]=null}),ze(),s=l[t],s?s.p(m,f):(s=l[t]=c[t](m),s.c()),S(s,1),s.m(e,null)),(!a||f&40&&r!==(r=m[3]+m[5].url.search))&&w(e,"href",r),f&2&&U(e,"rounded-lg",!m[1]),f&48&&U(e,"active",m[5].url.pathname.includes(m[4])),f&2&&U(e,"group",m[1])},i(m){a||(S(s),a=!0)},o(m){H(s),a=!1},d(m){m&&_(e),l[t].d(),o=!1,i()}}}function Et(n,e,t){let s;ae(n,ue,f=>t(5,s=f));let{$$slots:r={},$$scope:a}=e,{icon:o}=e,{group:i=$t("group")}=e,{scale:c=1}=e,{href:l="#"}=e,{base:u=l}=e;function m(f){Xe.call(this,n,f)}return n.$$set=f=>{"icon"in f&&t(0,o=f.icon),"group"in f&&t(1,i=f.group),"scale"in f&&t(2,c=f.scale),"href"in f&&t(3,l=f.href),"base"in f&&t(4,u=f.base),"$$scope"in f&&t(6,a=f.$$scope)},[o,i,c,l,u,s,a,r,m]}class Y extends Z{constructor(e){super();x(this,e,Et,wt,ee,{icon:0,group:1,scale:2,href:3,base:4})}}function yt(n){let e,t;return e=new Y({props:{icon:Ze}}),e.$on("click",n[0]),{c(){j(e.$$.fragment)},l(s){J(e.$$.fragment,s)},m(s,r){R(e,s,r),t=!0},p:xe,i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){B(e,s)}}}function kt(n,e,t){let s;ae(n,ue,c=>t(1,s=c));const{workflow:r,run:a,namespace:o}=s.params;return[async()=>{const c=await Me({namespace:o,executionId:r,runId:a}),l=JSON.stringify({events:c},null,2);u(l,`${a}/events.json`,"text/plain");function u(m,f,E){const g=document.createElement("a"),p=new Blob([m],{type:E});g.href=URL.createObjectURL(p),g.download=f,g.click()}}]}class It extends Z{constructor(e){super();x(this,e,kt,yt,ee,{})}}function At(n){let e,t;const s=n[1].default,r=oe(s,n,n[0],null);return{c(){e=$("div"),r&&r.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var o=b(e);r&&r.l(o),o.forEach(_),this.h()},h(){w(e,"class","flex")},m(a,o){O(a,e,o),r&&r.m(e,null),t=!0},p(a,[o]){r&&r.p&&(!t||o&1)&&ie(r,s,a,a[0],t?ce(s,a[0],o,null):fe(a[0]),null)},i(a){t||(S(r,a),t=!0)},o(a){H(r,a),t=!1},d(a){a&&_(e),r&&r.d(a)}}}function Ht(n,e,t){let{$$slots:s={},$$scope:r}=e;return et("group",!0),n.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,s]}class St extends Z{constructor(e){super();x(this,e,Ht,At,ee,{})}}function Re(n,e,t){const s=n.slice();return s[6]=e[t].id,s[7]=rt(e[t],["id"]),s}function Dt(n){let e,t,s,r,a,o=[],i=new Map,c,l,u,m,f=n[0];const E=g=>g[6];for(let g=0;g<f.length;g+=1){let p=Re(n,f,g),y=E(p);i.set(y,o[g]=Be(y,p))}return u=new gt({props:{href:n[1],$$slots:{default:[Ct]},$$scope:{ctx:n}}}),{c(){e=$("section"),t=$("h3"),s=P("Pending Activities"),r=I(),a=$("section");for(let g=0;g<o.length;g+=1)o[g].c();c=I(),l=$("div"),j(u.$$.fragment),this.h()},l(g){e=v(g,"SECTION",{class:!0});var p=b(e);t=v(p,"H3",{class:!0});var y=b(t);s=V(y,"Pending Activities"),y.forEach(_),r=A(p),a=v(p,"SECTION",{class:!0});var D=b(a);for(let F=0;F<o.length;F+=1)o[F].l(D);D.forEach(_),c=A(p),l=v(p,"DIV",{class:!0});var N=b(l);J(u.$$.fragment,N),N.forEach(_),p.forEach(_),this.h()},h(){w(t,"class","text-lg font-medium mb-4"),w(a,"class","w-full table-auto space-x-4"),w(l,"class","text-right"),w(e,"class","border-2 border-gray-300 rounded-lg p-4")},m(g,p){O(g,e,p),d(e,t),d(t,s),d(e,r),d(e,a);for(let y=0;y<o.length;y+=1)o[y].m(a,null);d(e,c),d(e,l),R(u,l,null),m=!0},p(g,p){p&3&&(f=g[0],o=tt(o,p,E,1,g,f,i,a,st,Be,null,Re));const y={};p&1024&&(y.$$scope={dirty:p,ctx:g}),u.$set(y)},i(g){m||(S(u.$$.fragment,g),m=!0)},o(g){H(u.$$.fragment,g),m=!1},d(g){g&&_(e);for(let p=0;p<o.length;p+=1)o[p].d();B(u)}}}function Be(n,e){var $e;let t,s,r=e[7].activityId+"",a,o,i,c,l,u,m,f,E,g=(($e=e[7].activityType)==null?void 0:$e.name)+"",p,y,D,N,F,K,C,h,k,q=e[7].lastFailure+"",M,W,G,T,z,me,de,X,he=_t(e[7].lastHeartbeatTime)+"",_e,ge;return{key:n,first:null,c(){t=$("a"),s=$("div"),a=P(r),o=I(),i=$("div"),c=$("div"),l=$("h4"),u=P("Activity Name"),m=I(),f=$("p"),E=$("span"),p=P(g),y=I(),D=$("div"),N=$("div"),F=$("h3"),K=P("Last Failure"),C=I(),h=$("pre"),k=$("code"),M=P(q),W=I(),G=$("div"),T=$("div"),z=$("h4"),me=P("Last Heartbeat Time"),de=I(),X=$("p"),_e=P(he),ge=I(),this.h()},l(Q){t=v(Q,"A",{class:!0,href:!0});var L=b(t);s=v(L,"DIV",{class:!0});var ve=b(s);a=V(ve,r),ve.forEach(_),o=A(L),i=v(L,"DIV",{class:!0});var be=b(i);c=v(be,"DIV",{class:!0});var te=b(c);l=v(te,"H4",{});var we=b(l);u=V(we,"Activity Name"),we.forEach(_),m=A(te),f=v(te,"P",{});var Ee=b(f);E=v(Ee,"SPAN",{class:!0});var ye=b(E);p=V(ye,g),ye.forEach(_),Ee.forEach(_),te.forEach(_),be.forEach(_),y=A(L),D=v(L,"DIV",{class:!0});var ke=b(D);N=v(ke,"DIV",{class:!0});var se=b(N);F=v(se,"H3",{});var Ie=b(F);K=V(Ie,"Last Failure"),Ie.forEach(_),C=A(se),h=v(se,"PRE",{style:!0,class:!0});var Ae=b(h);k=v(Ae,"CODE",{class:!0});var He=b(k);M=V(He,q),He.forEach(_),Ae.forEach(_),se.forEach(_),ke.forEach(_),W=A(L),G=v(L,"DIV",{class:!0});var Se=b(G);T=v(Se,"DIV",{class:!0});var ne=b(T);z=v(ne,"H4",{});var De=b(z);me=V(De,"Last Heartbeat Time"),De.forEach(_),de=A(ne),X=v(ne,"P",{});var Ce=b(X);_e=V(Ce,he),Ce.forEach(_),ne.forEach(_),Se.forEach(_),ge=A(L),L.forEach(_),this.h()},h(){w(s,"class","text-left font-normal text-gray-500 w-40"),w(E,"class","bg-gray-300 text-gray-700 px-2"),w(c,"class","flex gap-2"),w(i,"class","w-full"),w(k,"class","language-json"),Le(h,"padding","0 1em"),Le(h,"margin","0"),w(h,"class","rounded-lg"),w(N,"class","flex gap-2"),w(D,"class","w-full"),w(T,"class","flex gap-2"),w(G,"class","w-full"),w(t,"class","flex content-between w-full border-b-2 border-gray-300 p-2 last-of-type:border-b-0 hover:bg-gray-50"),w(t,"href",e[1]),this.first=t},m(Q,L){O(Q,t,L),d(t,s),d(s,a),d(t,o),d(t,i),d(i,c),d(c,l),d(l,u),d(c,m),d(c,f),d(f,E),d(E,p),d(t,y),d(t,D),d(D,N),d(N,F),d(F,K),d(N,C),d(N,h),d(h,k),d(k,M),d(t,W),d(t,G),d(G,T),d(T,z),d(z,me),d(T,de),d(T,X),d(X,_e),d(t,ge)},p(Q,L){e=Q},d(Q){Q&&_(t)}}}function Ct(n){let e;return{c(){e=P("Show all")},l(t){e=V(t,"Show all")},m(t,s){O(t,e,s)},d(t){t&&_(e)}}}function Ft(n){let e,t,s=n[0].length&&Dt(n);return{c(){s&&s.c(),e=Te()},l(r){s&&s.l(r),e=Te()},m(r,a){s&&s.m(r,a),O(r,e,a),t=!0},p(r,[a]){r[0].length&&s.p(r,a)},i(r){t||(S(s),t=!0)},o(r){H(s),t=!1},d(r){s&&s.d(r),r&&_(e)}}}function Nt(n,e,t){let s;ae(n,ue,l=>t(2,s=l));const{pendingActivities:r}=s.stuff.workflow,{namespace:a,workflow:o,run:i}=s.params,c=dt({namespace:a,workflow:o,run:i});return nt(()=>{window.Prism.highlightAll()}),[r,c]}class Ot extends Z{constructor(e){super();x(this,e,Nt,Ft,ee,{})}}function Pt(n){let e;return{c(){e=P("Summary")},l(t){e=V(t,"Summary")},m(t,s){O(t,e,s)},d(t){t&&_(e)}}}function Vt(n){let e;return{c(){e=P("Full")},l(t){e=V(t,"Full")},m(t,s){O(t,e,s)},d(t){t&&_(e)}}}function Tt(n){let e;return{c(){e=P("Compact")},l(t){e=V(t,"Compact")},m(t,s){O(t,e,s)},d(t){t&&_(e)}}}function Lt(n){let e;return{c(){e=P("JSON")},l(t){e=V(t,"JSON")},m(t,s){O(t,e,s)},d(t){t&&_(e)}}}function jt(n){let e,t,s,r,a,o,i,c;return e=new Y({props:{icon:lt,base:le(n[3]("summary")),href:je(n[3]("summary",n[0].params.eventId||"1")),$$slots:{default:[Pt]},$$scope:{ctx:n}}}),s=new Y({props:{icon:at,href:le(n[3]("full")),$$slots:{default:[Vt]},$$scope:{ctx:n}}}),a=new Y({props:{icon:ot,href:le(n[3]("compact")),$$slots:{default:[Tt]},$$scope:{ctx:n}}}),i=new Y({props:{icon:it,href:le(n[3]("json")),$$slots:{default:[Lt]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment),t=I(),j(s.$$.fragment),r=I(),j(a.$$.fragment),o=I(),j(i.$$.fragment)},l(l){J(e.$$.fragment,l),t=A(l),J(s.$$.fragment,l),r=A(l),J(a.$$.fragment,l),o=A(l),J(i.$$.fragment,l)},m(l,u){R(e,l,u),O(l,t,u),R(s,l,u),O(l,r,u),R(a,l,u),O(l,o,u),R(i,l,u),c=!0},p(l,u){const m={};u&1&&(m.href=je(l[3]("summary",l[0].params.eventId||"1"))),u&256&&(m.$$scope={dirty:u,ctx:l}),e.$set(m);const f={};u&256&&(f.$$scope={dirty:u,ctx:l}),s.$set(f);const E={};u&256&&(E.$$scope={dirty:u,ctx:l}),a.$set(E);const g={};u&256&&(g.$$scope={dirty:u,ctx:l}),i.$set(g)},i(l){c||(S(e.$$.fragment,l),S(s.$$.fragment,l),S(a.$$.fragment,l),S(i.$$.fragment,l),c=!0)},o(l){H(e.$$.fragment,l),H(s.$$.fragment,l),H(a.$$.fragment,l),H(i.$$.fragment,l),c=!1},d(l){B(e,l),l&&_(t),B(s,l),l&&_(r),B(a,l),l&&_(o),B(i,l)}}}function Jt(n){let e,t,s,r,a,o,i,c,l,u,m,f,E,g,p,y,D,N,F;s=new Je({props:{heading:"Input",content:n[1],framed:!0}}),a=new Je({props:{heading:"Result",content:n[2],framed:!0}}),i=new Ot({}),p=new St({props:{$$slots:{default:[jt]},$$scope:{ctx:n}}}),D=new It({});const K=n[7].default,C=oe(K,n,n[8],null);return{c(){e=$("section"),t=$("div"),j(s.$$.fragment),r=I(),j(a.$$.fragment),o=I(),j(i.$$.fragment),c=I(),l=$("section"),u=$("nav"),m=$("h3"),f=P("Event History"),E=I(),g=$("div"),j(p.$$.fragment),y=I(),j(D.$$.fragment),N=I(),C&&C.c(),this.h()},l(h){e=v(h,"SECTION",{class:!0});var k=b(e);t=v(k,"DIV",{class:!0});var q=b(t);J(s.$$.fragment,q),r=A(q),J(a.$$.fragment,q),q.forEach(_),o=A(k),J(i.$$.fragment,k),c=A(k),l=v(k,"SECTION",{id:!0});var M=b(l);u=v(M,"NAV",{class:!0});var W=b(u);m=v(W,"H3",{class:!0});var G=b(m);f=V(G,"Event History"),G.forEach(_),E=A(W),g=v(W,"DIV",{class:!0});var T=b(g);J(p.$$.fragment,T),y=A(T),J(D.$$.fragment,T),T.forEach(_),W.forEach(_),N=A(M),C&&C.l(M),M.forEach(_),k.forEach(_),this.h()},h(){w(t,"class","flex gap-4"),w(m,"class","text-lg font-medium"),w(g,"class","flex gap-4"),w(u,"class","flex gap-4 justify-between items-end pb-4"),w(l,"id","event-history"),w(e,"class","flex flex-col gap-4")},m(h,k){O(h,e,k),d(e,t),R(s,t,null),d(t,r),R(a,t,null),d(e,o),R(i,e,null),d(e,c),d(e,l),d(l,u),d(u,m),d(m,f),d(u,E),d(u,g),R(p,g,null),d(g,y),R(D,g,null),d(l,N),C&&C.m(l,null),F=!0},p(h,[k]){const q={};k&257&&(q.$$scope={dirty:k,ctx:h}),p.$set(q),C&&C.p&&(!F||k&256)&&ie(C,K,h,h[8],F?ce(K,h[8],k,null):fe(h[8]),null)},i(h){F||(S(s.$$.fragment,h),S(a.$$.fragment,h),S(i.$$.fragment,h),S(p.$$.fragment,h),S(D.$$.fragment,h),S(C,h),F=!0)},o(h){H(s.$$.fragment,h),H(a.$$.fragment,h),H(i.$$.fragment,h),H(p.$$.fragment,h),H(D.$$.fragment,h),H(C,h),F=!1},d(h){h&&_(e),B(s),B(a),B(i),B(p),B(D),C&&C.d(h)}}}const ss=async function({params:n,stuff:e,fetch:t}){const{workflow:s}=e,{namespace:r}=n,a={namespace:r,executionId:s.id,runId:s.runId},{events:o,eventGroups:i}=await pt(a,t);return{props:{namespace:r,workflow:s,events:o,eventGroups:i},stuff:{events:o,eventGroups:i}}};function Rt(n,e,t){let s;ae(n,ue,f=>t(0,s=f));let{$$slots:r={},$$scope:a}=e,{namespace:o}=e,{workflow:i}=e,{events:c}=e;const{input:l,result:u}=ht(c),m=(f,E)=>({namespace:o,workflow:i.id,run:i.runId,view:f,eventId:E});return n.$$set=f=>{"namespace"in f&&t(4,o=f.namespace),"workflow"in f&&t(5,i=f.workflow),"events"in f&&t(6,c=f.events),"$$scope"in f&&t(8,a=f.$$scope)},[s,l,u,m,o,i,c,r,a]}class ns extends Z{constructor(e){super();x(this,e,Rt,Jt,ee,{namespace:4,workflow:5,events:6})}}export{ns as default,ss as load};
